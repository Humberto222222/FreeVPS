name: Execução Contínua

on:
  workflow_run:
    workflows: ["CI"]
    types:
      - completed

jobs:
  build:
    runs-on: windows-2019

    steps:
      - uses: actions/checkout@v2

      - name: Fazendo as configurações básicas...
        run: |
          New-LocalUser -Name Humberto -Description "Usuário do Humberto's VPS"
          Set-LocalUser -Name Humberto -Password (ConvertTo-SecureString -AsPlainText "Humberto@#123" -Force)
          Add-LocalGroupMember -Group "Administradores" -Member Humberto
          Get-LocalUser
          Invoke-WebRequest -Uri "https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-386.zip" -OutFile "ngrok.zip"
          Expand-Archive -Path "ngrok.zip" -DestinationPath "ngrok"
          Set-LocalUser -Name "Administrator" -Password (ConvertTo-SecureString -AsPlainText "Humberto@#123" -Force)
          cd ngrok
          
          while ($true) {
            ngrok tcp 3389 --region sa
          }
